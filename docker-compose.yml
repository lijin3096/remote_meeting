version: '2'
services:
  db:
    image: mongo
    volumes: 
      - ./remote_api/scripts:/tmp/scripts
      - /var/opt/mongo/db:/data/db
  mq:
    image: rabbitmq
  remote_api:
    build: remote_api
    command: nodemon app.js
    environment:
      NODE_ENV: development
    volumes:
      - ./remote_api:/remote_api
    ports:
      - "3000:3000"
    depends_on:
      - db
      - mq
  dispatcher:
    build: dispatcher
    command: nodemon app.js
    volumes:
      - ./dispatcher:/dispatcher
    ports:
      - "3030:3030"
    depends_on:
      - mq
      - db
  
